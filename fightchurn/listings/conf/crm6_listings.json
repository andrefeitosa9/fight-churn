{
    "chap2": {
        "defaults": {
            "%from_yyyy-mm-dd": "2023-04-01",
            "%to_yyyy-mm-dd": "2023-05-01",
            "mode": "one",
            "type": "sql"
        },
        "list1": {
            "name": "net_retention",
            "params": {},
            "v2" : {
                "%from_yyyy-mm-dd": "2023-05-01",
                "%to_yyyy-mm-dd": "2023-06-01"
            }
        },
        "list2": {
            "name": "churn_rate",
            "params": {},
            "v2" : {
                "%from_yyyy-mm-dd": "2023-05-01",
                "%to_yyyy-mm-dd": "2023-06-01"
            }
        },
        "list3": {
            "name": "activity_churn",
            "params": {
                "%max_inactive": "1 month"
            },
            "v2" : {
                "%from_yyyy-mm-dd": "2023-05-01",
                "%to_yyyy-mm-dd": "2023-06-01"
            }
        },
        "list4": {
            "name": "mrr_churn",
            "params": {},
            "v2" : {
                "%from_yyyy-mm-dd": "2023-05-01",
                "%to_yyyy-mm-dd": "2023-06-01"
            }
        },
        "list5": {
            "name": "churn_rate_scaled",
            "params": {
                "%from_yyyy-mm-dd": "2023-01-01",
                "%to_yyyy-mm-dd": "2023-06-01"
            }
        },
        "list6": {
            "name": "churn_rate_multi",
            "params": {
                "%from_yyyy-mm-dd": "2022-02-01",
                "%to_yyyy-mm-dd": "2023-12-01",
                "mode": "save"
            }
        },
        "list7": {
            "name": "mrr_churn_multi",
            "params": {
                "%from_yyyy-mm-dd": "2022-02-01",
                "%to_yyyy-mm-dd": "2023-12-01",
                "mode": "save"
            }
        },
        "list8": {
            "name": "net_retention_multi",
            "params": {
                "%from_yyyy-mm-dd": "2022-02-01",
                "%to_yyyy-mm-dd": "2023-12-01",
                "mode": "save"
            }
        }
    },
    "chap3": {
        "defaults": {
            "%from_yyyy-mm-dd": "2022-01-31",
            "%to_yyyy-mm-dd": "2023-12-25",
            "mode": "top",
            "type": "sql",
            "%event2measure": "advance_stage",
            "%field2sum": "0"
        },
        "list1": {
            "name": "event_count",
            "params": {}
        },
        "list2": {
            "name": "multi_date_count",
            "params": {}
        },
        "list3": {
            "name": "count_metric_insert",
            "params": {
                "mode": "run",
                "%new_metric_id": 0
            },
            "v0": {
                "%new_metric_id": 0,
                "%event2measure": "search"
            },
            "v1": {
                "%new_metric_id" :1,
                "%event2measure": "create_search"
            },
            "v2": {
                "%new_metric_id" :2,
                "%event2measure": "edit_search"
            },
            "v3": {
                "%new_metric_id" :3,
                "%event2measure": "delete_search"
            },
            "v4": {
                "%new_metric_id" :4,
                "%event2measure": "win_opportunity"
            },
            "v5": {
                "%new_metric_id" :5,
                "%event2measure": "advance_stage"
            },
            "v6": {
                "%new_metric_id" :6,
                "%event2measure": "add_competitor"
            },
            "v7": {
                "%new_metric_id" :7,
                "%event2measure": "disqualify_opportunity"
            },
            "v8": {
                "%new_metric_id" :8,
                "%event2measure": "lose_opportunity"
            },
            "v9": {
                "%new_metric_id" :9,
                "%event2measure": "quote"
            },
            "v10": {
                "%new_metric_id" :10,
                "%event2measure": "create_opportunity"
            },
            "v11": {
                "%new_metric_id" :11,
                "%event2measure": "add_contact"
            },
            "v12": {
                "%new_metric_id" :12,
                "%event2measure": "edit_contact"
            },
            "v13": {
                "%new_metric_id" :13,
                "%event2measure": "add_lead"
            },
            "v14": {
                "%new_metric_id" :14,
                "%event2measure": "unsub_lead"
            },
            "v15": {
                "%new_metric_id" :15,
                "%event2measure": "edit_lead"
            },
            "v16": {
                "%new_metric_id" :16,
                "%event2measure": "email_lead"
            },
            "v17": {
                "%new_metric_id" :17,
                "%event2measure": "call_lead"
            },
            "v18": {
                "%new_metric_id" :18,
                "%event2measure": "create_list"
            },
            "v19": {
                "%new_metric_id" :19,
                "%event2measure": "delete_list"
            },
            "v20": {
                "%new_metric_id" :20,
                "%event2measure": "email_list"
            },
            "v21": {
                "%new_metric_id" :21,
                "%event2measure": "meeting"
            },
            "v22": {
                "%new_metric_id" :22,
                "%event2measure": "schedule_meeting"
            },
            "v23": {
                "%new_metric_id" :23,
                "%event2measure": "edit_meeting"
            },
            "v24": {
                "%new_metric_id" :24,
                "%event2measure": "cancel_meeting"
            }
        },
        "list4": {
            "name": "metric_name_insert",
            "params": {
                "mode": "run",
                "%new_metric_name": "search_per_month",
                "%new_metric_id": 0
            },
            "v0": {
                "%new_metric_id" :0,
                "%new_metric_name": "search_per_month"
            },
            "v1": {
                "%new_metric_id" :1,
                "%new_metric_name": "create_search_per_month"
            },
            "v2": {
                "%new_metric_id" :2,
                "%new_metric_name": "edit_search_per_month"
            },
            "v3": {
                "%new_metric_id" :3,
                "%new_metric_name": "delete_search_per_month"
            },
            "v4": {
                "%new_metric_id" :4,
                "%new_metric_name": "win_opportunity_per_month"
            },
            "v5": {
                "%new_metric_id" :5,
                "%new_metric_name": "advance_stage_per_month"
            },
            "v6": {
                "%new_metric_id" :6,
                "%new_metric_name": "add_competitor_per_month"
            },
            "v7": {
                "%new_metric_id" :7,
                "%new_metric_name": "disqualify_opportunity_per_month"
            },
            "v8": {
                "%new_metric_id" :8,
                "%new_metric_name": "lose_opportunity_per_month"
            },
            "v9": {
                "%new_metric_id" :9,
                "%new_metric_name": "quote_per_month"
            },
            "v10": {
                "%new_metric_id" :10,
                "%new_metric_name": "create_opportunity_per_month"
            },
            "v11": {
                "%new_metric_id" :11,
                "%new_metric_name": "add_contact_per_month"
            },
            "v12": {
                "%new_metric_id" :12,
                "%new_metric_name": "edit_contact_per_month"
            },
            "v13": {
                "%new_metric_id" :13,
                "%new_metric_name": "add_lead_per_month"
            },
            "v14": {
                "%new_metric_id" :14,
                "%new_metric_name": "unsub_lead_per_month"
            },
            "v15": {
                "%new_metric_id" :15,
                "%new_metric_name": "edit_lead_per_month"
            },
            "v16": {
                "%new_metric_id" :16,
                "%new_metric_name": "email_lead_per_month"
            },
            "v17": {
                "%new_metric_id" :17,
                "%new_metric_name": "call_lead_per_month"
            },
            "v18": {
                "%new_metric_id" :18,
                "%new_metric_name": "create_list_per_month"
            },
            "v19": {
                "%new_metric_id" :19,
                "%new_metric_name": "delete_list_per_month"
            },
            "v20": {
                "%new_metric_id" :20,
                "%new_metric_name": "email_list_per_month"
            },
            "v21": {
                "%new_metric_id" :21,
                "%new_metric_name": "meeting_per_month"
            },
            "v22": {
                "%new_metric_id" :22,
                "%new_metric_name": "schedule_meeting_per_month"
            },
            "v23": {
                "%new_metric_id" :23,
                "%new_metric_name": "edit_meeting_per_month"
            },
            "v24": {
                "%new_metric_id" :24,
                "%new_metric_name": "cancel_meeting_per_month"
            },

            "v25": {
                "%new_metric_name": "mrr",
                "%new_metric_id": 25
            },
            "v26": {
                "%new_metric_name": "billing_period_months",
                "%new_metric_id": 26
            },
            "v27": {
                "%new_metric_name": "discount",
                "%new_metric_id": 27
            },
            "v28": {
                "%new_metric_name": "users_purchased",
                "%new_metric_id": 28
            },

            "v30": {
                "%new_metric_name": "account_tenure",
                "%new_metric_id": 30
            },

            "v31": {
                "%new_metric_name": "opp_value_per_month",
                "%new_metric_id": 31
            },
            "v32": {
                "%new_metric_name": "opp_value_lost_per_month",
                "%new_metric_id": 32
            }

        },
        "list5": {
            "name": "sum_metric",
            "params": {
                "%event2measure": "win_opportunity",
                "%field2sum": "event_value"
            }
        },

        "list6": {
            "name": "metric_stats_over_time",
            "params": {
                "mode": "save",
                "%metric2measure": "search_per_month",
                "save_ext": "search_per_month"
            },
            "v1": {}
        },
        "list7": {
            "name": "metric_qa_plot",
            "params": {
                "type": "py",
                "qa_data_path": "crm6/crm6_metric_stats_over_time",
                "metric_name": "search_per_month"
            },
            "v1": {}
        },
        "list8": {
            "name": "metric_coverage",
            "params": {
                "mode": "save"
            }
        },
        "list11": {
            "name": "events_per_account",
            "params": {
                "mode": "save"
            }
        },
        "list12": {
            "name": "account_tenure",
            "params": {}
        },
        "list13": {
            "name": "account_tenure_insert",
            "params": {
                "mode": "run",
                "%new_metric_id": 30
            }
        },
        "list17": {
            "name": "mrr_insert",
            "params": {
                "mode": "run",
                "%new_metric_id": 25
            }
        },
        "list18": {
            "name": "sum_metric_insert",
            "params": {
                "mode": "run",
                "%event2measure": "win_opportunity",
                "%field2sum": "event_value",
                "%new_metric_id": 31
            },
            "v1": {
                "mode": "run",
                "%event2measure": "win_opportunity",
                "%field2sum": "event_value",
                "%new_metric_id": 31
            },
            "v2": {
                "mode": "run",
                "%event2measure": "lose_opportunity",
                "%field2sum": "event_value",
                "%new_metric_id": 32
            }
        },
        "list19": {
            "name": "unit_quantity_insert",
            "params": {
                "mode": "run",
                "%unit": "users",
                "%new_metric_id": 28
            }
        },
        "list20": {
            "name": "billing_period_insert",
            "params": {
                "mode": "run",
                "%new_metric_id": 26
            }
        },
        "list21": {
            "name": "discount_insert",
            "params": {
                "mode": "run",
                "%new_metric_id": 27
            }
        }
    },
    "chap4": {
        "defaults": {
            "%from_yyyy-mm-dd": "2022-01-31",
            "%to_yyyy-mm-dd": "2023-12-25",
            "mode": "run",
            "type": "sql"
        },
        "list1": {
            "name": "ongoing_active_periods",
            "params": {
                "%gap_interval": "7 day"
            }
        },
        "list2": {
            "name": "churned_periods",
            "params": {
                "%gap_interval": "7 day"
            }
        },
        "list4": {
            "name": "observation_dates",
            "params": {
                "%obs_interval": "1 month",
                "%lead_time": "5 day"
            }
        },
        "list9": {
            "name": "dataset",
            "params": {
                "mode": "save",
                "%metric_interval": "7 day"
            }
        },
        "list10": {
            "name": "dataset",
            "params": {
                "mode": "save",
                "%metric_interval": "7 day"
            }
        }
    },
    "chap5": {
        "defaults": {
            "data_set_path": "crm6/crm6_dataset.csv",
            "type": "py"
        },
        "list1": {
            "name": "cohort_plot",
            "params": {
                "metric_to_plot": "win_opportunity"
            },
            "v1": {
                "metric_to_plot": "add_contact"
            },
            "v2": {
                "metric_to_plot": "edit_contact"
            },
            "v3": {
                "metric_to_plot": "add_lead"
            },
            "v4": {
                "metric_to_plot": "edit_lead"
            },
            "v5": {
                "metric_to_plot": "email_lead"
            },
            "v6": {
                "metric_to_plot": "call_lead"
            },
            "v7": {
                "metric_to_plot": "unsub_lead"
            },
            "v8": {
                "metric_to_plot": "create_list"
            },
            "v9": {
                "metric_to_plot": "delete_list"
            },
            "v10": {
                "metric_to_plot": "email_list"
            },
            "v11": {
                "metric_to_plot": "meeting"
            },
            "v12": {
                "metric_to_plot": "schedule_meeting"
            },
            "v13": {
                "metric_to_plot": "edit_meeting"
            },
            "v14": {
                "metric_to_plot": "cancel_meeting"
            },
            "v15": {
                "metric_to_plot": "quote"
            },
            "v16": {
                "metric_to_plot": "create_opportunity"
            },
            "v17": {
                "metric_to_plot": "advance_stage"
            },
            "v18": {
                "metric_to_plot": "win_opportunity"
            },
            "v19": {
                "metric_to_plot": "add_competitor"
            },
            "v21": {
                "metric_to_plot": "lose_opportunity"
            },
            "v23": {
                "metric_to_plot": "search"
            },
            "v24": {
                "metric_to_plot": "search_actions"
            },
            "v25": {
                "metric_to_plot": "search_action_per_search"
            },
            "v26": {
                "metric_to_plot": "search_actions_per_dollar_closed"
            },
            "v28": {
                "metric_to_plot": "discount"
            },
            "v30": {
                "metric_to_plot": "mrr"
            },
            "v31": {
                "metric_to_plot": "opp_value_won"
            },
            "v32": {
                "metric_to_plot": "users_purchased"
            },
            "v33": {
                "metric_to_plot": "opp_value_per_dollar"
            },
            "v34": {
                "metric_to_plot": "active_users_per_month"
            },
            "v35": {
                "metric_to_plot": "user_utilization"
            },
            "v36": {
                "metric_to_plot": "search_actions_per_dollar_closed"
            },
            "v38": {
                "metric_to_plot": "loss_rate"
            },
            "v39": {
                "metric_to_plot": "cancel_meeting_rate"
            },
            "v40": {
                "metric_to_plot": "deletes_per_email"
            },
            "v41": {
                "metric_to_plot": "mrr_per_active_user"
            },
            "v42": {
                "metric_to_plot": "mrr_per_dollar_closed",
                "exclude_zeros" : false,
                "log_scale" : true
            },
            "v43": {
                "metric_to_plot": "mrr_per_lead_added"
            },
            "v44": {
                "metric_to_plot": "opp_value_lost"
            },
            "v45": {
                "metric_to_plot": "pcnt_opp_value_lost"
            },
            "v46": {
                "metric_to_plot": "opp_value_closed_per_active_user"
            },
            "v47": {
                "data_set_path": "crm6/crm6_dataset3.csv",
                "metric_to_plot": "customer_age"
            }
        },
        "list2": {
            "name": "dataset_stats",
            "params": {}
        },
        "list3": {
            "name": "metric_scores",
            "params": {}
        },
        "list5": {
            "name": "fixed_cohort_plot",
            "params": {
                "metric_to_plot": "bill_period_months",
                "bins" : [0, 3, 9, 15]
            }
        }
    },
    "chap6": {
        "defaults": {
            "data_set_path": "crm6/crm6_dataset.csv",
            "type": "py"
        },
        "list2": {
            "name": "dataset_correlation_matrix",
            "params": {}
        },
        "list3": {
            "name": "apply_metric_groups",
            "params": {}
        },
        "list4": {
            "name": "find_metric_groups",
            "params": {
                "group_corr_thresh": 0.75
            }
        },
        "list5": {
            "name": "ordered_correlation_matrix",
            "params": {}
        }
    },
    "chap7": {
        "defaults": {
            "%from_yyyy-mm-dd": "2022-01-31",
            "%to_yyyy-mm-dd": "2023-12-25",
            "mode": "top",
            "type": "sql"
        },
        "list10": {
            "name": "filled_ratio",
            "params": {
                "%num_metric": "mrr",
                "%den_metric": "opp_value_per_month",
                "%fill_val": 1
            },
            "insert": {
                "params": {
                    "%num_metric": "mrr",
                    "%den_metric": "opp_value_per_month",
                    "%new_metric_id": 47,
                    "%new_metric_name": "mrr_per_dollar_closed",
                    "%fill_val": 1
                }
            }
        },
        "list1": {
            "name": "ratio_metric",
            "params": {
                    "%num_metric": "opp_value_per_month",
                    "%den_metric": "mrr"
            },
            "insert": {
                "params": {
                    "%num_metric": "opp_value_per_dollar",
                    "%den_metric": "mrr",
                    "%new_metric_id": 33,
                    "%new_metric_name": "opp_close_per_dollar"
                },
                "v1": {
                    "%new_metric_name": "opp_value_per_dollar",
                    "%num_metric": "opp_value_per_month",
                    "%den_metric": "mrr",
                    "%new_metric_id": 33
                },
                "v2": {
                    "%new_metric_name": "user_utilization",
                    "%num_metric": "active_users",
                    "%den_metric": "users_purchased",
                    "%new_metric_id": 35
                },
                "v3": {
                    "%new_metric_name": "search_action_per_search",
                    "%num_metric": "search_actions",
                    "%den_metric": "search_28avg_84obs",
                    "%new_metric_id": 36
                },
                "v5": {
                    "%new_metric_name": "loss_rate",
                    "%num_metric": "lose_opportunity_28avg_84obs",
                    "%den_metric": "closed_opps",
                    "%new_metric_id": 38
                },
                "v6": {
                    "%new_metric_name": "cancel_meeting_rate",
                    "%num_metric": "cancel_meeting_28avg_84obs",
                    "%den_metric": "meeting_outcomes",
                    "%new_metric_id": 39
                },
                "v7": {
                    "%new_metric_name": "deletes_per_email",
                    "%num_metric": "delete_list_28avg_84obs",
                    "%den_metric": "email_list_28avg_84obs",
                    "%new_metric_id": 40
                },
                "v8": {
                    "%new_metric_name": "search_actions_per_dollar_closed",
                    "%num_metric": "search_actions",
                    "%den_metric": "opp_value_per_month",
                    "%new_metric_id": 45
                },
                "v9": {
                    "%new_metric_name": "mrr_per_lead_added",
                    "%num_metric": "mrr",
                    "%den_metric": "add_lead_28avg_84obs",
                    "%new_metric_id": 46
                },
                "v11": {
                    "%new_metric_name": "mrr_per_active_user",
                    "%num_metric": "mrr",
                    "%den_metric": "active_users",
                    "%new_metric_id": 48
                },
                "v12": {
                    "%new_metric_name": "pcnt_opp_value_lost",
                    "%num_metric": "opp_value_lost_per_month",
                    "%den_metric": "total_opp_value_closed",
                    "%new_metric_id": 51
                },
                "v13": {
                    "%new_metric_name": "opp_close_per_active_user",
                    "%num_metric": "total_opp_value_closed",
                    "%den_metric": "active_users",
                    "%new_metric_id": 52
                }
            }
        },
        "list3": {
            "name": "total_metric",
            "params": {
                "%metric_list": " 'lose_opportunity_28avg_84obs', 'win_opportunity_28avg_84obs' "
            },
            "insert": {
                "params": {
                    "%metric_list": " 'lose_opportunity_28avg_84obs', 'win_opportunity_28avg_84obs' ",
                    "%new_metric_id": 41,
                    "%new_metric_name": "closed_opps"
                },
                "v1": {
                    "%metric_list": " 'lose_opportunity_28avg_84obs', 'win_opportunity_28avg_84obs' ",
                    "%new_metric_id": 41,
                    "%new_metric_name": "closed_opps"
                },
                "v3": {
                    "%metric_list": " 'cancel_meeting_28avg_84obs', 'meeting_28avg_84obs' ",
                    "%new_metric_id": 43,
                    "%new_metric_name": "meeting_outcomes"
                },
                "v4": {
                    "%metric_list": " 'create_search_28avg_84obs', 'edit_search_28avg_84obs', 'delete_search_28avg_84obs'",
                    "%new_metric_id": 44,
                    "%new_metric_name": "search_actions"
                },
                "v5": {
                    "%metric_list": " 'opp_value_lost_per_month', 'opp_value_per_month'",
                    "%new_metric_id": 50,
                    "%new_metric_name": "total_opp_value_closed"
                }
            }
        },
        "list7": {
            "name": "scaled_events_per_month",
            "params": {
                "%event2measure": "lose_opportunity",
                "%obs_period": 84,
                "%desc_period": 28
            }
        },
        "list8": {
            "name": "tenure_scaled_events_per_month",
            "params": {
                "%event2measure": "lose_opportunity",
                "%obs_period": 84,
                "%desc_period": 28,
                "%min_tenure": 14,
                "%from_yyyy-mm-dd": "2022-01-31",
                "%to_yyyy-mm-dd": "2023-12-25"
            },
            "insert": {
                "params": {
                    "%obs_period": 84,
                    "%desc_period": 28,
                    "%min_tenure": 14
                },
                "v0": {
                    "%new_metric_id": 100,
                    "%event2measure": "search"
                },
                "v1": {
                    "%new_metric_id" :101,
                    "%event2measure": "create_search"
                },
                "v2": {
                    "%new_metric_id" :102,
                    "%event2measure": "edit_search"
                },
                "v3": {
                    "%new_metric_id" :103,
                    "%event2measure": "delete_search"
                },
                "v4": {
                    "%new_metric_id" :104,
                    "%event2measure": "win_opportunity"
                },
                "v5": {
                    "%new_metric_id" :105,
                    "%event2measure": "advance_stage"
                },
                "v6": {
                    "%new_metric_id" :106,
                    "%event2measure": "add_competitor"
                },
                "v7": {
                    "%new_metric_id" :107,
                    "%event2measure": "disqualify_opportunity"
                },
                "v8": {
                    "%new_metric_id": 108,
                    "%event2measure": "lose_opportunity"
                },
                "v9": {
                    "%new_metric_id" :109,
                    "%event2measure": "quote"
                },
                "v10": {
                    "%new_metric_id" :110,
                    "%event2measure": "create_opportunity"
                },
                "v11": {
                    "%new_metric_id" :111,
                    "%event2measure": "add_contact"
                },
                "v12": {
                    "%new_metric_id" :112,
                    "%event2measure": "edit_contact"
                },
                "v13": {
                    "%new_metric_id" :113,
                    "%event2measure": "add_lead"
                },
                "v14": {
                    "%new_metric_id" :114,
                    "%event2measure": "unsub_lead"
                },
                "v15": {
                    "%new_metric_id" :115,
                    "%event2measure": "edit_lead"
                },
                "v16": {
                    "%new_metric_id" :116,
                    "%event2measure": "email_lead"
                },
                "v17": {
                    "%new_metric_id" :117,
                    "%event2measure": "call_lead"
                },
                "v18": {
                    "%new_metric_id" :118,
                    "%event2measure": "create_list"
                },
                "v19": {
                    "%new_metric_id" :119,
                    "%event2measure": "delete_list"
                },
                "v20": {
                    "%new_metric_id" :120,
                    "%event2measure": "email_list"
                },
                "v21": {
                    "%new_metric_id" :121,
                    "%event2measure": "meeting"
                },
                "v22": {
                    "%new_metric_id" :122,
                    "%event2measure": "schedule_meeting"
                },
                "v23": {
                    "%new_metric_id" :123,
                    "%event2measure": "edit_meeting"
                },
                "v24": {
                    "%new_metric_id" :124,
                    "%event2measure": "cancel_meeting"
                }
            }
        },
        "list9": {
            "name": "count_active_users",
            "params": {
                "%obs_period": 28
            },
            "insert" : {
                "params": {
                    "%obs_period": 28,
                    "%new_metric_id": 34
                }
            }
        }
    },
    "chap9": {
        "defaults": {
            "data_set_path": "crm6/crm6_dataset.csv",
            "type": "py"
        },
        "list6": {
            "name": "crossvalidate_xgb",
            "params": {
                "n_test_split": 2
            }
        },
        "list7": {
            "name": "churn_forecast_xgb",
            "params": {}
        },
        "list8": {
            "name": "shap_explain_xgb",
            "params": {}
        }
    },
    "chap10": {
        "defaults": {
            "type": "py",
            "data_set_path": "crm6/crm6_dataset3.csv"
        },
        "list8": {
            "name": "dataset3",
            "params": {
                "%from_yyyy-mm-dd": "2022-01-31",
                "%to_yyyy-mm-dd": "2023-12-25",
                "%metric_interval": "7 day",
                "mode": "save",
                "type": "sql"
            }
        },
        "list2": {
            "name": "category_churn_cohorts",
            "params": {
                "cat_col": "channel"
            },
            "v1": {},
            "v2": {
                "cat_col": "country"
            }
        }
    }
}
